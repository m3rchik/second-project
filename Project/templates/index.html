<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="auth-container">
        <h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</h1>
        
        {% with messages = get_flashed_messages() %}
            {% if messages %}
            <div class="messages">
                {% for message in messages %}
                    <div class="message">{{ message }}</div>
                {% endfor %}
            </div>
            {% endif %}
        {% endwith %}

        <div class="auth-tabs">
            <button class="tab-button active" onclick="showTab('login')">–í—Ö–æ–¥</button>
            <button class="tab-button" onclick="showTab('register')">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
        </div>

        <form method="POST" id="login-form" class="auth-form">
            <div class="form-group">
                <input type="text" name="login" placeholder="Email –∏–ª–∏ –ø—Å–µ–≤–¥–æ–Ω–∏–º *" required>
            </div>
            <div class="form-group">
                <input type="password" name="password" placeholder="–ü–∞—Ä–æ–ª—å *" required>
            </div>
            <button type="submit" name="action" value="login">–í–æ–π—Ç–∏</button>
            <div class="forgot-password">
                <button type="button" onclick="toggleResetForm()">–ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å?</button>
            </div>
        </form>

        <!-- –§–æ—Ä–º–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è (–∏–∑–Ω–∞—á–∞–ª—å–Ω–æ —Å–∫—Ä—ã—Ç–∞) -->
        <form method="POST" action="{{ url_for('request_reset') }}" id="reset-form" class="auth-form reset-form" style="display: none;">
            <h2>–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è</h2>
            <div class="form-group">
                <input type="email" name="email" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à email" required>
            </div>
            <div class="form-buttons">
                <button type="submit">–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞—Ä–æ–ª—å</button>
                <button type="button" onclick="toggleResetForm()" class="cancel-button">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </form>

        <form method="POST" id="register-form" class="auth-form" style="display: none;" onsubmit="return validatePassword()">
            <div class="form-group">
                <input type="email" name="login" placeholder="Email *" required>
            </div>
            <div class="form-group password-group">
                <input type="password" name="password" id="register-password" 
                       placeholder="–ü–∞—Ä–æ–ª—å *" required
                       pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&\-_])[A-Za-z\d@$!%*?&\-_]{8,}$"
                       oninput="checkPassword(this.value)">
                <div class="password-requirements">
                    <p>–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –ø–∞—Ä–æ–ª—é:</p>
                    <ul>
                        <li id="length">–ú–∏–Ω–∏–º—É–º 8 —Å–∏–º–≤–æ–ª–æ–≤</li>
                        <li id="lowercase">–°—Ç—Ä–æ—á–Ω—ã–µ –±—É–∫–≤—ã (a-z)</li>
                        <li id="uppercase">–ó–∞–≥–ª–∞–≤–Ω—ã–µ –±—É–∫–≤—ã (A-Z)</li>
                        <li id="number">–¶–∏—Ñ—Ä—ã (0-9)</li>
                        <li id="special">–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã (@$!%*?&-_)</li>
                    </ul>
                </div>
            </div>
            <div class="form-group">
                <input type="text" name="nickname" placeholder="–ü—Å–µ–≤–¥–æ–Ω–∏–º">
                <div class="field-hint">–ö–∞–∫ –≤–∞—Å –±—É–¥—É—Ç –≤–∏–¥–µ—Ç—å –¥—Ä—É–≥–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</div>
            </div>
            <div class="form-group">
                <input type="tel" name="phone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω" pattern="[0-9+\s-()]*">
                <div class="field-hint">–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ</div>
            </div>
            <button type="submit" name="action" value="register">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
        </form>
    </div>

    <div class="features">
        <div class="feature">
            <div class="feature-icon">üì∞</div>
            <h3>–ê–∫—Ç—É–∞–ª—å–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏</h3>
            <p>–ë—É–¥—å—Ç–µ –≤ –∫—É—Ä—Å–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å–æ–±—ã—Ç–∏–π –∏–∑ —Ä–∞–∑–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π</p>
        </div>
        <div class="feature">
            <div class="feature-icon">üîç</div>
            <h3>–£–¥–æ–±–Ω—ã–π –ø–æ–∏—Å–∫</h3>
            <p>–ù–∞—Ö–æ–¥–∏—Ç–µ –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â–∏–µ –≤–∞—Å –Ω–æ–≤–æ—Å—Ç–∏ –±—ã—Å—Ç—Ä–æ –∏ –ª–µ–≥–∫–æ</p>
        </div>
        <div class="feature">
            <div class="feature-icon">üì±</div>
            <h3>–í—Å–µ–≥–¥–∞ –Ω–∞ —Å–≤—è–∑–∏</h3>
            <p>–ß–∏—Ç–∞–π—Ç–µ –Ω–æ–≤–æ—Å—Ç–∏ —Å –ª—é–±–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞</p>
        </div>
        <div class="feature">
            <div class="feature-icon">üåê</div>
            <h3>–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è</h3>
            <p>–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ª–µ–Ω—Ç—É –Ω–æ–≤–æ—Å—Ç–µ–π –ø–æ–¥ —Å–≤–æ–∏ –∏–Ω—Ç–µ—Ä–µ—Å—ã</p>
        </div>
    </div>

    <script>
        function toggleResetForm() {
            const loginForm = document.getElementById('login-form');
            const resetForm = document.getElementById('reset-form');
            const registerForm = document.getElementById('register-form');
            const authTabs = document.querySelector('.auth-tabs');
            const messages = document.querySelector('.messages');
            
            if (resetForm.style.display === 'none') {
                resetForm.style.display = 'block';
                loginForm.style.display = 'none';
                registerForm.style.display = 'none';
                authTabs.style.display = 'none';
                if (messages) {
                    messages.style.display = 'none';
                }
            } else {
                resetForm.style.display = 'none';
                loginForm.style.display = 'block';
                authTabs.style.display = 'flex';
                if (messages) {
                    messages.style.display = 'block';
                }
            }
        }

        function showTab(tabName) {
            const loginForm = document.getElementById('login-form');
            const registerForm = document.getElementById('register-form');
            const resetForm = document.getElementById('reset-form');
            const authTabs = document.querySelector('.auth-tabs');
            const buttons = document.querySelectorAll('.tab-button');
            const messages = document.querySelector('.messages');
            
            resetForm.style.display = 'none';
            authTabs.style.display = 'flex';
            if (messages) {
                messages.style.display = 'block';
            }
            
            if (tabName === 'login') {
                loginForm.style.display = 'block';
                registerForm.style.display = 'none';
                buttons[0].classList.add('active');
                buttons[1].classList.remove('active');
            } else {
                loginForm.style.display = 'none';
                registerForm.style.display = 'block';
                buttons[0].classList.remove('active');
                buttons[1].classList.add('active');
            }
        }

        function checkPassword(password) {
            const requirements = {
                length: password.length >= 8,
                lowercase: /[a-z]/.test(password),
                uppercase: /[A-Z]/.test(password),
                number: /[0-9]/.test(password),
                special: /[@$!%*?&\-_]/.test(password)
            };

            for (const [requirement, met] of Object.entries(requirements)) {
                const element = document.getElementById(requirement);
                if (met) {
                    element.classList.add('met');
                    element.classList.remove('unmet');
                } else {
                    element.classList.add('unmet');
                    element.classList.remove('met');
                }
            }
        }

        function validatePassword() {
            const password = document.getElementById('register-password').value;
            const requirements = {
                length: password.length >= 8,
                lowercase: /[a-z]/.test(password),
                uppercase: /[A-Z]/.test(password),
                number: /[0-9]/.test(password),
                special: /[@$!%*?&\-_]/.test(password)
            };

            const allRequirementsMet = Object.values(requirements).every(met => met);
            
            if (!allRequirementsMet) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–∞—Ä–æ–ª—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –≤—Å–µ–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º');
                return false;
            }
            
            return true;
        }
    </script>
</body>
</html> 